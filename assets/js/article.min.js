const tblOfContents = document.querySelector(".panel-body");
var tocBtn = document.querySelector(".toc-toggle-btn")
if (tocBtn) {
    tocBtn.addEventListener("click", function (e) {
        tblOfContents.classList.toggle('d-none');
        if (this.innerText == "Show") {
            this.innerText = "Hide"
        } else {
            this.innerText = "Show"
        }
    });

}
// Select the container that potentially contains h2 elements
var articleContent = document.querySelector(".article-content");
var contentSection = document.querySelector(".list");

// Function to convert a string into a slug
function string_to_slug(str) {
    return str.toLowerCase().trim().replace(/\s+/g, "-").replace(/-+/g, "-");
}

// Define the variable to hold all headings
var headingList;

if (articleContent) {
    // Query all heading elements within the article content
    headingList = articleContent.querySelectorAll("h2");

    // Hide the table of contents if there are no headings
    if (headingList.length === 0) {
        var toc = document.querySelector(".table-of-contents");
        if (toc) {
            toc.style.display = "none";
        }
    }
}

// Process each heading in the list
for (var i = 0; i < headingList.length; i++) {
    var heading = headingList[i];
    var tagName = heading.tagName.toLowerCase(); // Get the tag name and ensure it's lowercase
    var slug = string_to_slug(heading.innerText); // Generate slug from heading text
    heading.id = slug; // Set the id of the heading for anchor linking

    // Append a new list item to the contentSection based on the heading type
    contentSection.innerHTML += `<li><a href="#${slug}">${heading.innerText}</a></li>`;
}

document.addEventListener("copy", () => {
    var e = window.getSelection();
    if ("" != e) {
        copytext = e + (pagelink = " Read more at: " + document.location.href);
        var t = document.createElement("textarea");
        t.value = copytext, document.body.appendChild(t), t.style.opacity = 0, t.select(), navigator.clipboard.writeText(t.value), e.deleteFromDocument(), t.remove()
    }
}), window.onload = function () {
    if (document.querySelectorAll(".instagram-media").length) {
        var e = document.createElement("script");
        e.src = "//www.instagram.com/embed.js", e.defer = !0, e.async = !0;
        var t = document.getElementsByTagName("script")[0];
        t.parentNode.insertBefore(e, t)
    }
    if (document.querySelectorAll(".twitter-tweet").length) {
        var e = document.createElement("script");
        e.src = "//platform.twitter.com/widgets.js", e.defer = !0, e.async = !0;
        var t = document.getElementsByTagName("script")[0];
        t.parentNode.insertBefore(e, t)
    }
};


document.addEventListener('DOMContentLoaded', function () {
    const h1 = document.querySelector('h1'); // Select the H1 tag
    const nepaliButton = document.querySelector('.floating-nepali-button'); // Select the button

    // Check if both the H1 and the button exist
    if (h1 && nepaliButton) {
        h1.insertAdjacentElement('afterend', nepaliButton); // Place the button after the H1 tag
    }
});
